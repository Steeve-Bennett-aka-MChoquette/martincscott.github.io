import{_ as n}from"./preload-helper.BlTxHScW.js";(localStorage.getItem("appTheme")==="dark"||!("appTheme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add("dark-mode");async function i(){const e=document.getElementById("message");try{const t=localStorage.getItem("auth_locale")||"fr",{data:o,error:a}=await window.supabaseClient.auth.getSession();if(a)throw a;o?.session?(e.textContent="Authentication successful! Redirecting...",window.location.href=`/${t}/secure`):(e.textContent="No session found. Redirecting to login...",setTimeout(()=>{window.location.href=`/${t}/auth/login`},2e3))}catch(t){console.error("Auth callback error:",t),e.textContent="Authentication error. Redirecting to login...",setTimeout(()=>{const o=localStorage.getItem("auth_locale")||"fr";window.location.href=`/${o}/auth/login`},3e3)}}document.addEventListener("DOMContentLoaded",async()=>{try{const{createClient:e}=await n(async()=>{const{createClient:o}=await import("https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm");return{createClient:o}},[]),t=e("${supabaseUrl}","${supabaseAnonKey}");window.supabaseClient=t,i()}catch(e){console.error("Failed to initialize Supabase client:",e),document.getElementById("message").textContent="Failed to initialize authentication client. Please try again."}});
